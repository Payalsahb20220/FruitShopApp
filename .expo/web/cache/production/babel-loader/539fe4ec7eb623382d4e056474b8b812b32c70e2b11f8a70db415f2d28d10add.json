{"ast":null,"code":"import React,{useState,useEffect}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import{getFirestore,doc,setDoc,deleteDoc,getDoc}from'firebase/firestore';import{auth}from'../firebaseConfig';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductCard=({product,onAddToCart})=>{const[liked,setLiked]=useState(false);const[quantity,setQuantity]=useState(0);useEffect(()=>{const checkWishlist=async()=>{if(!auth.currentUser)return;const db=getFirestore();const userId=auth.currentUser.uid;const wishlistRef=doc(db,\"wishlist\",`${userId}_${product.id}`);const docSnap=await getDoc(wishlistRef);if(docSnap.exists()){setLiked(true);}};checkWishlist();},[product.id]);const handleLike=async()=>{if(!auth.currentUser){Alert.alert(\"Login Required\",\"Please log in to use the wishlist.\");return;}const db=getFirestore();const userId=auth.currentUser.uid;const wishlistRef=doc(db,\"wishlist\",`${userId}_${product.id}`);if(liked){await deleteDoc(wishlistRef);setLiked(false);}else{await setDoc(wishlistRef,{userId,productId:product.id,name:product.name,image:product.image,price:product.price});setLiked(true);}};const increaseQuantity=()=>setQuantity(prev=>prev+1);const decreaseQuantity=()=>setQuantity(prev=>prev>0?prev-1:0);return _jsxs(View,{style:styles.card,children:[_jsx(Image,{source:{uri:product.image},style:styles.image}),_jsx(Text,{style:styles.name,children:product.name}),_jsx(Text,{style:styles.description,children:product.description}),_jsxs(Text,{style:styles.price,children:[\"\\u20B9\",product.price]}),_jsxs(View,{style:styles.quantityContainer,children:[_jsx(TouchableOpacity,{style:styles.button,onPress:decreaseQuantity,children:_jsx(Text,{style:styles.buttonText,children:\"-\"})}),_jsx(Text,{style:styles.quantity,children:quantity}),_jsx(TouchableOpacity,{style:styles.button,onPress:increaseQuantity,children:_jsx(Text,{style:styles.buttonText,children:\"+\"})})]}),_jsx(TouchableOpacity,{style:[styles.likeButton,liked?styles.liked:styles.notLiked],onPress:handleLike,children:_jsx(Text,{style:styles.likeText,children:liked?'‚ù§Ô∏è Liked':'ü§ç Like'})}),_jsx(TouchableOpacity,{style:styles.addToCartButton,onPress:()=>onAddToCart(product,quantity),children:_jsx(Text,{style:styles.addToCartText,children:\"Add to Cart\"})})]});};const styles=StyleSheet.create({card:{backgroundColor:'#fff',padding:16,margin:8,borderRadius:8,shadowColor:'#000',shadowOpacity:0.1,shadowRadius:4,elevation:2},image:{width:'100%',height:150,borderRadius:8},name:{fontSize:18,fontWeight:'bold',marginVertical:8},description:{fontSize:14,color:'#666',marginBottom:8},price:{fontSize:16,fontWeight:'bold'},quantityContainer:{flexDirection:'row',alignItems:'center',justifyContent:'space-between',marginVertical:8},button:{backgroundColor:'#ddd',padding:8,borderRadius:4},buttonText:{fontSize:18,fontWeight:'bold'},quantity:{fontSize:18,fontWeight:'bold'},likeButton:{marginVertical:8,padding:8,borderRadius:4,alignItems:'center'},liked:{backgroundColor:'#ffcccc'},notLiked:{backgroundColor:'#eee'},likeText:{fontSize:16},addToCartButton:{backgroundColor:'#4CAF50',padding:10,borderRadius:4,alignItems:'center'},addToCartText:{color:'#fff',fontWeight:'bold'}});export default ProductCard;","map":{"version":3,"names":["React","useState","useEffect","View","Text","Image","StyleSheet","TouchableOpacity","Alert","getFirestore","doc","setDoc","deleteDoc","getDoc","auth","jsx","_jsx","jsxs","_jsxs","ProductCard","product","onAddToCart","liked","setLiked","quantity","setQuantity","checkWishlist","currentUser","db","userId","uid","wishlistRef","id","docSnap","exists","handleLike","alert","productId","name","image","price","increaseQuantity","prev","decreaseQuantity","style","styles","card","children","source","uri","description","quantityContainer","button","onPress","buttonText","likeButton","notLiked","likeText","addToCartButton","addToCartText","create","backgroundColor","padding","margin","borderRadius","shadowColor","shadowOpacity","shadowRadius","elevation","width","height","fontSize","fontWeight","marginVertical","color","marginBottom","flexDirection","alignItems","justifyContent"],"sources":["/Users/payalsah/Documents/FruitShopApp/components/ProductCard.tsx"],"sourcesContent":["import React, { useState , useEffect } from 'react';\nimport { View, Text, Image, StyleSheet, TouchableOpacity ,Alert } from 'react-native';\nimport { getFirestore, doc, setDoc, deleteDoc, getDoc } from 'firebase/firestore';\nimport { auth } from '../firebaseConfig';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  image: any;\n}\n\ninterface ProductCardProps {\n  product: Product;\n  onAddToCart: (product: Product, quantity: number) => void;\n}\n\nconst ProductCard: React.FC<ProductCardProps> = ({ product, onAddToCart }) => {\n  const [liked, setLiked] = useState(false);\n  const [quantity, setQuantity] = useState(0); // Default quantity is 0\n\n  useEffect(() => {\n    const checkWishlist = async () => {\n      if (!auth.currentUser) return;\n      const db = getFirestore();\n      const userId = auth.currentUser.uid;\n      const wishlistRef = doc(db, \"wishlist\", `${userId}_${product.id}`);\n      \n      const docSnap = await getDoc(wishlistRef);\n      if (docSnap.exists()) {\n        setLiked(true);\n      }\n    };\n\n    checkWishlist();\n  }, [product.id]);\n\n  const handleLike = async () => {\n    if (!auth.currentUser) {\n      Alert.alert(\"Login Required\", \"Please log in to use the wishlist.\");\n      return;\n    }\n\n    const db = getFirestore();\n    const userId = auth.currentUser.uid;\n    const wishlistRef = doc(db, \"wishlist\", `${userId}_${product.id}`);\n\n    if (liked) {\n      await deleteDoc(wishlistRef);\n      setLiked(false);\n    } else {\n      await setDoc(wishlistRef, {\n        userId,\n        productId: product.id,\n        name: product.name,\n        image: product.image,\n        price: product.price,\n      });\n      setLiked(true);\n    }\n  };\n\n\n  const increaseQuantity = () => setQuantity((prev) => prev + 1);\n  const decreaseQuantity = () =>\n    setQuantity((prev) => (prev > 0 ? prev - 1 : 0)); // Prevent going below 0\n\n  return (\n    <View style={styles.card}>\n      <Image source={{ uri:product.image }} style={styles.image} />\n      <Text style={styles.name}>{product.name}</Text>\n      <Text style={styles.description}>{product.description}</Text>\n      <Text style={styles.price}>‚Çπ{product.price}</Text>\n\n      {/* Quantity Selector */}\n      <View style={styles.quantityContainer}>\n        <TouchableOpacity style={styles.button} onPress={decreaseQuantity}>\n          <Text style={styles.buttonText}>-</Text>\n        </TouchableOpacity>\n        <Text style={styles.quantity}>{quantity}</Text>\n        <TouchableOpacity style={styles.button} onPress={increaseQuantity}>\n          <Text style={styles.buttonText}>+</Text>\n        </TouchableOpacity>\n      </View>\n\n      {/* Like Button */}\n      <TouchableOpacity\n        style={[styles.likeButton, liked ? styles.liked : styles.notLiked]}\n        onPress={handleLike}\n      >\n        <Text style={styles.likeText}>{liked ? '‚ù§Ô∏è Liked' : 'ü§ç Like'}</Text>\n      </TouchableOpacity>\n\n      {/* Add to Cart Button */}\n      <TouchableOpacity\n        style={styles.addToCartButton}\n        onPress={() => onAddToCart(product, quantity)}\n      >\n        <Text style={styles.addToCartText}>Add to Cart</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: '#fff',\n    padding: 16,\n    margin: 8,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 2,\n  },\n  image: {\n    width: '100%',\n    height: 150,\n    borderRadius: 8,\n  },\n  name: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginVertical: 8,\n  },\n  description: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 8,\n  },\n  price: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  quantityContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginVertical: 8,\n  },\n  button: {\n    backgroundColor: '#ddd',\n    padding: 8,\n    borderRadius: 4,\n  },\n  buttonText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  quantity: {\n    fontSize: 18,\n    fontWeight: 'bold',\n  },\n  likeButton: {\n    marginVertical: 8,\n    padding: 8,\n    borderRadius: 4,\n    alignItems: 'center',\n  },\n  liked: {\n    backgroundColor: '#ffcccc',\n  },\n  notLiked: {\n    backgroundColor: '#eee',\n  },\n  likeText: {\n    fontSize: 16,\n  },\n  addToCartButton: {\n    backgroundColor: '#4CAF50',\n    padding: 10,\n    borderRadius: 4,\n    alignItems: 'center',\n  },\n  addToCartText: {\n    color: '#fff',\n    fontWeight: 'bold',\n  },\n});\n\nexport default ProductCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}