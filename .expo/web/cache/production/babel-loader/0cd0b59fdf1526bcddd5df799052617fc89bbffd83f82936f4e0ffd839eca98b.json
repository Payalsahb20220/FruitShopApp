{"ast":null,"code":"import React,{createContext,useContext,useState}from'react';import{getFirestore,doc,setDoc,deleteDoc}from'firebase/firestore';import{auth}from'../firebaseConfig';import{jsx as _jsx}from\"react/jsx-runtime\";const WishlistContext=createContext(undefined);export const WishlistProvider=({children})=>{const[wishlist,setWishlist]=useState([]);const db=getFirestore();const toggleWishlist=async product=>{const user=auth.currentUser;if(!user)return;const userId=user.uid;const wishlistRef=doc(db,'wishlist',`${userId}_${product.id}`);setWishlist(prevWishlist=>{const isInWishlist=prevWishlist.some(item=>item.id===product.id);if(isInWishlist){deleteDoc(wishlistRef).then(()=>console.log('Item removed from Firebase wishlist')).catch(error=>console.error('Error removing item:',error));return prevWishlist.filter(item=>item.id!==product.id);}else{setDoc(wishlistRef,Object.assign({},product,{userId})).then(()=>console.log('Item added to Firebase wishlist')).catch(error=>console.error('Error adding item:',error));return[...prevWishlist,product];}});};return _jsx(WishlistContext.Provider,{value:{wishlist,toggleWishlist},children:children});};export const useWishlist=()=>{const context=useContext(WishlistContext);if(!context){throw new Error('useWishlist must be used within a WishlistProvider');}return context;};","map":{"version":3,"names":["React","createContext","useContext","useState","getFirestore","doc","setDoc","deleteDoc","auth","jsx","_jsx","WishlistContext","undefined","WishlistProvider","children","wishlist","setWishlist","db","toggleWishlist","product","user","currentUser","userId","uid","wishlistRef","id","prevWishlist","isInWishlist","some","item","then","console","log","catch","error","filter","Object","assign","Provider","value","useWishlist","context","Error"],"sources":["/Users/payalsah/Documents/FruitShopApp/contexts/WishlistContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\nimport { getFirestore, collection, doc, setDoc, deleteDoc } from 'firebase/firestore';\nimport { auth } from '../firebaseConfig'; // Ensure you have auth imported and configured\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  image: string;\n}\n\ninterface WishlistContextType {\n  wishlist: Product[];\n  toggleWishlist: (product: Product) => void;\n}\n\nconst WishlistContext = createContext<WishlistContextType | undefined>(undefined);\n\nexport const WishlistProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [wishlist, setWishlist] = useState<Product[]>([]);\n  const db = getFirestore();\n\n  const toggleWishlist = async (product: Product) => {\n    const user = auth.currentUser;\n    if (!user) return;\n\n    const userId = user.uid;\n    const wishlistRef = doc(db, 'wishlist', `${userId}_${product.id}`);\n\n    setWishlist((prevWishlist) => {\n      const isInWishlist = prevWishlist.some((item) => item.id === product.id);\n\n      if (isInWishlist) {\n        // Remove from wishlist\n        deleteDoc(wishlistRef)\n          .then(() => console.log('Item removed from Firebase wishlist'))\n          .catch((error) => console.error('Error removing item:', error));\n\n        return prevWishlist.filter((item) => item.id !== product.id);\n      } else {\n        // Add to wishlist\n        setDoc(wishlistRef, { ...product, userId })\n          .then(() => console.log('Item added to Firebase wishlist'))\n          .catch((error) => console.error('Error adding item:', error));\n\n        return [...prevWishlist, product];\n      }\n    });\n  };\n\n  return (\n    <WishlistContext.Provider value={{ wishlist, toggleWishlist }}>\n      {children}\n    </WishlistContext.Provider>\n  );\n};\n\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAClE,OAASC,YAAY,CAAcC,GAAG,CAAEC,MAAM,CAAEC,SAAS,KAAQ,oBAAoB,CACrF,OAASC,IAAI,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAezC,KAAM,CAAAC,eAAe,CAAGV,aAAa,CAAkCW,SAAS,CAAC,CAEjF,MAAO,MAAM,CAAAC,gBAAyD,CAAGA,CAAC,CAAEC,QAAS,CAAC,GAAK,CACzF,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAY,EAAE,CAAC,CACvD,KAAM,CAAAc,EAAE,CAAGb,YAAY,CAAC,CAAC,CAEzB,KAAM,CAAAc,cAAc,CAAG,KAAO,CAAAC,OAAgB,EAAK,CACjD,KAAM,CAAAC,IAAI,CAAGZ,IAAI,CAACa,WAAW,CAC7B,GAAI,CAACD,IAAI,CAAE,OAEX,KAAM,CAAAE,MAAM,CAAGF,IAAI,CAACG,GAAG,CACvB,KAAM,CAAAC,WAAW,CAAGnB,GAAG,CAACY,EAAE,CAAE,UAAU,CAAE,GAAGK,MAAM,IAAIH,OAAO,CAACM,EAAE,EAAE,CAAC,CAElET,WAAW,CAAEU,YAAY,EAAK,CAC5B,KAAM,CAAAC,YAAY,CAAGD,YAAY,CAACE,IAAI,CAAEC,IAAI,EAAKA,IAAI,CAACJ,EAAE,GAAKN,OAAO,CAACM,EAAE,CAAC,CAExE,GAAIE,YAAY,CAAE,CAEhBpB,SAAS,CAACiB,WAAW,CAAC,CACnBM,IAAI,CAAC,IAAMC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAAC,CAC9DC,KAAK,CAAEC,KAAK,EAAKH,OAAO,CAACG,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAAC,CAEjE,MAAO,CAAAR,YAAY,CAACS,MAAM,CAAEN,IAAI,EAAKA,IAAI,CAACJ,EAAE,GAAKN,OAAO,CAACM,EAAE,CAAC,CAC9D,CAAC,IAAM,CAELnB,MAAM,CAACkB,WAAW,CAAAY,MAAA,CAAAC,MAAA,IAAOlB,OAAO,EAAEG,MAAM,EAAE,CAAC,CACxCQ,IAAI,CAAC,IAAMC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAAC,CAC1DC,KAAK,CAAEC,KAAK,EAAKH,OAAO,CAACG,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAAC,CAE/D,MAAO,CAAC,GAAGR,YAAY,CAAEP,OAAO,CAAC,CACnC,CACF,CAAC,CAAC,CACJ,CAAC,CAED,MACE,CAAAT,IAAA,CAACC,eAAe,CAAC2B,QAAQ,EAACC,KAAK,CAAE,CAAExB,QAAQ,CAAEG,cAAe,CAAE,CAAAJ,QAAA,CAC3DA,QAAQ,CACe,CAAC,CAE/B,CAAC,CAED,MAAO,MAAM,CAAA0B,WAAW,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAAAC,OAAO,CAAGvC,UAAU,CAACS,eAAe,CAAC,CAC3C,GAAI,CAAC8B,OAAO,CAAE,CACZ,KAAM,IAAI,CAAAC,KAAK,CAAC,oDAAoD,CAAC,CACvE,CACA,MAAO,CAAAD,OAAO,CAChB,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}