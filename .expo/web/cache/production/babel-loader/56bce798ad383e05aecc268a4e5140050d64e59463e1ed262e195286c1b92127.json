{"ast":null,"code":"import React,{useState}from'react';import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Alert from\"react-native-web/dist/exports/Alert\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{createUserWithEmailAndPassword}from'firebase/auth';import{auth}from'../firebaseConfig';import{useNavigation}from'@react-navigation/native';import{sendEmailVerification}from\"firebase/auth\";import{getFirestore,doc,setDoc}from\"firebase/firestore\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignupScreen(){const[name,setName]=useState('');const[mobile,setMobile]=useState('');const[address,setAddress]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[isLoading,setIsLoading]=useState(false);const navigation=useNavigation();const handleSignup=async()=>{if(!name||!mobile||!address||!email||!password){Alert.alert(\"Error\",\"All fields are required!\");return;}setIsLoading(true);try{const userCredential=await createUserWithEmailAndPassword(auth,email,password);const user=userCredential.user;await sendEmailVerification(user);console.log(\"Verification email sent!\");const db=getFirestore();await setDoc(doc(db,\"users\",user.uid),{name,mobile,address,email,photoURL:user.photoURL||null});console.log(\"User signed up:\",userCredential.user);Alert.alert(\"Success\",\"Account created successfully! Please verify your email before logging in.\");navigation.navigate(\"Home\");}catch(error){console.error(\"Signup Error:\",error.message);Alert.alert(\"Error\",error.message);}finally{setIsLoading(false);}};return _jsxs(ScrollView,{contentContainerStyle:styles.container,children:[_jsx(Text,{style:styles.title,children:\"Sign Up\"}),_jsx(TextInput,{style:styles.input,placeholder:\"Full Name\",placeholderTextColor:\"#aaa\",value:name,onChangeText:setName}),_jsx(TextInput,{style:styles.input,placeholder:\"Mobile Number\",placeholderTextColor:\"#aaa\",keyboardType:\"numeric\",value:mobile,onChangeText:setMobile}),_jsx(TextInput,{style:styles.input,placeholder:\"Address\",placeholderTextColor:\"#aaa\",value:address,onChangeText:setAddress}),_jsx(TextInput,{style:styles.input,placeholder:\"Email\",placeholderTextColor:\"#aaa\",keyboardType:\"email-address\",value:email,onChangeText:setEmail}),_jsx(TextInput,{style:styles.input,placeholder:\"Password\",placeholderTextColor:\"#aaa\",secureTextEntry:true,value:password,onChangeText:setPassword}),_jsx(TouchableOpacity,{style:[styles.button,isLoading&&styles.buttonDisabled],onPress:handleSignup,disabled:isLoading,children:isLoading?_jsx(ActivityIndicator,{color:\"#fff\"}):_jsx(Text,{style:styles.buttonText,children:\"Sign Up\"})})]});}const styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#fff',padding:20},title:{fontSize:24,fontWeight:'bold',color:'#333',marginBottom:20},input:{width:'90%',backgroundColor:'#f9f9f9',padding:15,borderRadius:8,borderWidth:1,borderColor:'#ddd',marginBottom:20},button:{backgroundColor:'#FFA500',padding:15,borderRadius:8,width:'80%',alignItems:'center',marginVertical:10},buttonDisabled:{backgroundColor:'#FFC04C'},buttonText:{color:'#fff',fontSize:16,fontWeight:'bold'}});","map":{"version":3,"names":["React","useState","Text","TextInput","TouchableOpacity","StyleSheet","ScrollView","Alert","ActivityIndicator","createUserWithEmailAndPassword","auth","useNavigation","sendEmailVerification","getFirestore","doc","setDoc","jsx","_jsx","jsxs","_jsxs","SignupScreen","name","setName","mobile","setMobile","address","setAddress","email","setEmail","password","setPassword","isLoading","setIsLoading","navigation","handleSignup","alert","userCredential","user","console","log","db","uid","photoURL","navigate","error","message","contentContainerStyle","styles","container","children","style","title","input","placeholder","placeholderTextColor","value","onChangeText","keyboardType","secureTextEntry","button","buttonDisabled","onPress","disabled","color","buttonText","create","flex","justifyContent","alignItems","backgroundColor","padding","fontSize","fontWeight","marginBottom","width","borderRadius","borderWidth","borderColor","marginVertical"],"sources":["/Users/payalsah/Documents/FruitShopApp/screens/SignupScreen.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, ScrollView, Alert, ActivityIndicator } from 'react-native';\nimport { createUserWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '../firebaseConfig';\nimport { useNavigation } from '@react-navigation/native';\nimport { NativeStackNavigationProp } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/types';\nimport { sendEmailVerification } from \"firebase/auth\";\nimport { getFirestore, doc, setDoc } from \"firebase/firestore\";\n\n\n\n\ntype SignupScreenNavigationProp = NativeStackNavigationProp<RootStackParamList, 'Signup'>;\n\nexport default function SignupScreen() {\n  const [name, setName] = useState('');\n  const [mobile, setMobile] = useState('');\n  const [address, setAddress] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false); // For button state\n  const navigation = useNavigation<SignupScreenNavigationProp>();\n\n  const handleSignup = async () => {\n    if (!name || !mobile || !address || !email || !password) {\n      Alert.alert(\"Error\", \"All fields are required!\");\n      return;\n    }\n\n    \n\n    setIsLoading(true); // Button in \"loading\" state\n    try {\n      const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n      const user = userCredential.user;\n\n      // Send verification email\n      await sendEmailVerification(user);\n      console.log(\"Verification email sent!\");\n\n      // Save additional profile data to Firestore\n      const db = getFirestore();\n      await setDoc(doc(db, \"users\", user.uid), {\n        name,\n        mobile,\n        address,\n        email,\n        photoURL: user.photoURL || null,\n      });\n\n\n      console.log(\"User signed up:\", userCredential.user);\n      Alert.alert(\"Success\", \"Account created successfully! Please verify your email before logging in.\");\n      navigation.navigate(\"Home\"); // Navigate after success\n    } catch (error: any) {\n      console.error(\"Signup Error:\", error.message);\n      Alert.alert(\"Error\", error.message);\n    } finally {\n      setIsLoading(false); // Reset button state\n    }\n  };\n\n  return (\n    <ScrollView contentContainerStyle={styles.container}>\n      <Text style={styles.title}>Sign Up</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"Full Name\"\n        placeholderTextColor=\"#aaa\"\n        value={name}\n        onChangeText={setName}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Mobile Number\"\n        placeholderTextColor=\"#aaa\"\n        keyboardType=\"numeric\"\n        value={mobile}\n        onChangeText={setMobile}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Address\"\n        placeholderTextColor=\"#aaa\"\n        value={address}\n        onChangeText={setAddress}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Email\"\n        placeholderTextColor=\"#aaa\"\n        keyboardType=\"email-address\"\n        value={email}\n        onChangeText={setEmail}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Password\"\n        placeholderTextColor=\"#aaa\"\n        secureTextEntry\n        value={password}\n        onChangeText={setPassword}\n      />\n      <TouchableOpacity\n        style={[styles.button, isLoading && styles.buttonDisabled]}\n        onPress={handleSignup}\n        disabled={isLoading}\n      >\n        {isLoading ? (\n          <ActivityIndicator color=\"#fff\" />\n        ) : (\n          <Text style={styles.buttonText}>Sign Up</Text>\n        )}\n      </TouchableOpacity>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff',\n    padding: 20,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 20,\n  },\n  input: {\n    width: '90%',\n    backgroundColor: '#f9f9f9',\n    padding: 15,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    marginBottom: 20,\n  },\n  button: {\n    backgroundColor: '#FFA500',\n    padding: 15,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center',\n    marginVertical: 10,\n  },\n  buttonDisabled: {\n    backgroundColor: '#FFC04C', // Lighter orange for the disabled state\n  },\n  buttonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}