{"ast":null,"code":"var _jsxFileName = \"/Users/payalsah/Documents/FruitShopApp/contexts/WishlistContext.tsx\";\nimport React, { createContext, useContext, useState } from 'react';\nimport { getFirestore, doc, setDoc, deleteDoc } from 'firebase/firestore';\nimport { auth } from '../firebaseConfig';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WishlistContext = createContext(undefined);\nexport const WishlistProvider = ({\n  children\n}) => {\n  const [wishlist, setWishlist] = useState([]);\n  const db = getFirestore();\n  const toggleWishlist = async product => {\n    const user = auth.currentUser;\n    if (!user) return;\n    const userId = user.uid;\n    const wishlistRef = doc(db, 'wishlist', `${userId}_${product.id}`);\n    setWishlist(prevWishlist => {\n      const isInWishlist = prevWishlist.some(item => item.id === product.id);\n      if (isInWishlist) {\n        deleteDoc(wishlistRef).then(() => console.log('Item removed from Firebase wishlist')).catch(error => console.error('Error removing item:', error));\n        return prevWishlist.filter(item => item.id !== product.id);\n      } else {\n        setDoc(wishlistRef, Object.assign({}, product, {\n          userId\n        })).then(() => console.log('Item added to Firebase wishlist')).catch(error => console.error('Error adding item:', error));\n        return [...prevWishlist, product];\n      }\n    });\n  };\n  return _jsxDEV(WishlistContext.Provider, {\n    value: {\n      wishlist,\n      toggleWishlist\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useState","getFirestore","doc","setDoc","deleteDoc","auth","jsxDEV","_jsxDEV","WishlistContext","undefined","WishlistProvider","children","wishlist","setWishlist","db","toggleWishlist","product","user","currentUser","userId","uid","wishlistRef","id","prevWishlist","isInWishlist","some","item","then","console","log","catch","error","filter","Object","assign","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","useWishlist","context","Error"],"sources":["/Users/payalsah/Documents/FruitShopApp/contexts/WishlistContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\nimport { getFirestore, collection, doc, setDoc, deleteDoc } from 'firebase/firestore';\nimport { auth } from '../firebaseConfig'; // Ensure you have auth imported and configured\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  image: string;\n}\n\ninterface WishlistContextType {\n  wishlist: Product[];\n  toggleWishlist: (product: Product) => void;\n}\n\nconst WishlistContext = createContext<WishlistContextType | undefined>(undefined);\n\nexport const WishlistProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [wishlist, setWishlist] = useState<Product[]>([]);\n  const db = getFirestore();\n\n  const toggleWishlist = async (product: Product) => {\n    const user = auth.currentUser;\n    if (!user) return;\n\n    const userId = user.uid;\n    const wishlistRef = doc(db, 'wishlist', `${userId}_${product.id}`);\n\n    setWishlist((prevWishlist) => {\n      const isInWishlist = prevWishlist.some((item) => item.id === product.id);\n\n      if (isInWishlist) {\n        // Remove from wishlist\n        deleteDoc(wishlistRef)\n          .then(() => console.log('Item removed from Firebase wishlist'))\n          .catch((error) => console.error('Error removing item:', error));\n\n        return prevWishlist.filter((item) => item.id !== product.id);\n      } else {\n        // Add to wishlist\n        setDoc(wishlistRef, { ...product, userId })\n          .then(() => console.log('Item added to Firebase wishlist'))\n          .catch((error) => console.error('Error adding item:', error));\n\n        return [...prevWishlist, product];\n      }\n    });\n  };\n\n  return (\n    <WishlistContext.Provider value={{ wishlist, toggleWishlist }}>\n      {children}\n    </WishlistContext.Provider>\n  );\n};\n\nexport const useWishlist = () => {\n  const context = useContext(WishlistContext);\n  if (!context) {\n    throw new Error('useWishlist must be used within a WishlistProvider');\n  }\n  return context;\n};\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAClE,SAASC,YAAY,EAAcC,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AACrF,SAASC,IAAI,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAezC,MAAMC,eAAe,GAAGV,aAAa,CAAkCW,SAAS,CAAC;AAEjF,OAAO,MAAMC,gBAAyD,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EACzF,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGb,QAAQ,CAAY,EAAE,CAAC;EACvD,MAAMc,EAAE,GAAGb,YAAY,CAAC,CAAC;EAEzB,MAAMc,cAAc,GAAG,MAAOC,OAAgB,IAAK;IACjD,MAAMC,IAAI,GAAGZ,IAAI,CAACa,WAAW;IAC7B,IAAI,CAACD,IAAI,EAAE;IAEX,MAAME,MAAM,GAAGF,IAAI,CAACG,GAAG;IACvB,MAAMC,WAAW,GAAGnB,GAAG,CAACY,EAAE,EAAE,UAAU,EAAE,GAAGK,MAAM,IAAIH,OAAO,CAACM,EAAE,EAAE,CAAC;IAElET,WAAW,CAAEU,YAAY,IAAK;MAC5B,MAAMC,YAAY,GAAGD,YAAY,CAACE,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACJ,EAAE,KAAKN,OAAO,CAACM,EAAE,CAAC;MAExE,IAAIE,YAAY,EAAE;QAEhBpB,SAAS,CAACiB,WAAW,CAAC,CACnBM,IAAI,CAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,qCAAqC,CAAC,CAAC,CAC9DC,KAAK,CAAEC,KAAK,IAAKH,OAAO,CAACG,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC,CAAC;QAEjE,OAAOR,YAAY,CAACS,MAAM,CAAEN,IAAI,IAAKA,IAAI,CAACJ,EAAE,KAAKN,OAAO,CAACM,EAAE,CAAC;MAC9D,CAAC,MAAM;QAELnB,MAAM,CAACkB,WAAW,EAAAY,MAAA,CAAAC,MAAA,KAAOlB,OAAO;UAAEG;QAAM,EAAE,CAAC,CACxCQ,IAAI,CAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAAC,CAC1DC,KAAK,CAAEC,KAAK,IAAKH,OAAO,CAACG,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC,CAAC;QAE/D,OAAO,CAAC,GAAGR,YAAY,EAAEP,OAAO,CAAC;MACnC;IACF,CAAC,CAAC;EACJ,CAAC;EAED,OACET,OAAA,CAACC,eAAe,CAAC2B,QAAQ;IAACC,KAAK,EAAE;MAAExB,QAAQ;MAAEG;IAAe,CAAE;IAAAJ,QAAA,EAC3DA;EAAQ;IAAA0B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACe,CAAC;AAE/B,CAAC;AAED,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAC/B,MAAMC,OAAO,GAAG3C,UAAU,CAACS,eAAe,CAAC;EAC3C,IAAI,CAACkC,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,oDAAoD,CAAC;EACvE;EACA,OAAOD,OAAO;AAChB,CAAC","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}