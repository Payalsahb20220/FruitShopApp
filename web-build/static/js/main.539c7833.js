(()=>{"use strict";var e={469:(e,t,o)=>{var r=o(3664),a=o(6665),n=o(2284),i=o(4917),l=o(4504),s=o(5482),d=o(8963),c=o(157),u=o(1487),f=o(4038),h=o(7345),g=o(7908),p=o(6153),m=o(3715);const y=(0,g.initializeApp)({apiKey:"AIzaSyBiEQwvKQDFld4XD7W3tIN-OECBJ7NSaVo",authDomain:"fruitsshop-bf9a7.firebaseapp.com",projectId:"fruitsshop-bf9a7",storageBucket:"fruitsshop-bf9a7.firebasestorage.app",messagingSenderId:"34758574044",appId:"1:34758574044:android:6827009a67d900bc371919"}),x=(0,p.getAuth)(y);(0,m.getFirestore)(y);var b=o(9653),j=o(9685),C=o(5020),v=o(9381),T=o(397);function w(){const e=(0,n.useNavigation)(),[t,r]=(0,a.useState)(null),[i,u]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=x.currentUser;if(e)try{const t=(0,m.getFirestore)(),o=await(0,m.getDoc)((0,m.doc)(t,"users",e.uid));o.exists()&&r(o.data())}catch(t){console.error("Error fetching user details: ",t)}})()}),[]);return(0,T.jsxs)(l.default,{style:S.container,children:[t&&(0,T.jsx)(c.default,{style:S.wishlistButton,onPress:()=>e.navigate("Wishlist"),children:(0,T.jsx)(b.default,{name:"favorite",size:35,color:"#FFA500"})}),(0,T.jsx)(l.default,{style:S.topRightButtons,children:t?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(c.default,{onPress:()=>u(!0),children:(0,T.jsx)(b.default,{name:"account-circle",size:45,color:"#FFA500"})}),(0,T.jsx)(f.default,{animationType:"slide",transparent:!0,visible:i,onRequestClose:()=>u(!1),children:(0,T.jsx)(l.default,{style:S.modalContainer,children:(0,T.jsxs)(l.default,{style:S.modalContent,children:[(0,T.jsx)(c.default,{onPress:async()=>{const{status:e}=await C.requestMediaLibraryPermissionsAsync();if("granted"!==e)return void h.default.alert("Permission Denied","You need to allow access to the photo library.");const t=await C.launchImageLibraryAsync({mediaTypes:v.MediaTypeOptions.Images,allowsEditing:!0,quality:1});if(!t.canceled&&t.assets.length>0){const e=t.assets[0].uri;try{const t=(0,j.getStorage)(),o=(0,j.ref)(t,`profilePhotos/${x.currentUser?.uid}`),a=await fetch(e),n=await a.blob();await(0,j.uploadBytes)(o,n);const i=await(0,j.getDownloadURL)(o),l=(0,m.getFirestore)(),s=(0,m.doc)(l,"users",x.currentUser?.uid);await(0,m.updateDoc)(s,{profilePhotoUrl:i}),r((e=>Object.assign({},e,{profilePhotoUrl:i}))),h.default.alert("Success","Profile photo updated successfully!")}catch(o){console.error("Error uploading profile photo:",o),h.default.alert("Error","Failed to upload profile photo.")}}},children:t?.profilePhotoUrl?(0,T.jsx)(d.default,{source:{uri:t.profilePhotoUrl},style:S.profileImage}):(0,T.jsx)(l.default,{style:S.placeholderImage,children:(0,T.jsx)(b.default,{name:"person",size:50,color:"#aaa"})})}),(0,T.jsx)(s.default,{style:S.imageHint,children:"Tap to upload a profile photo"}),(0,T.jsx)(s.default,{style:S.profileTitle,children:"Profile Details"}),(0,T.jsxs)(s.default,{style:S.profileText,children:["Name: ",t.name]}),(0,T.jsxs)(s.default,{style:S.profileText,children:["Email: ",t.email]}),(0,T.jsxs)(s.default,{style:S.profileText,children:["Mobile: ",t.mobile]}),(0,T.jsxs)(s.default,{style:S.profileText,children:["Address: ",t.address]}),(0,T.jsx)(c.default,{style:[S.button,{marginTop:20}],onPress:async()=>{try{await x.signOut(),h.default.alert("Success","You have been signed out."),r(null),e.navigate("Home")}catch(t){h.default.alert("Error","Failed to sign out.")}},children:(0,T.jsx)(s.default,{style:S.buttonText,children:"Sign Out"})}),(0,T.jsx)(c.default,{onPress:()=>u(!1),style:S.closeButton,children:(0,T.jsx)(s.default,{style:S.closeButtonText,children:"Close"})})]})})})]}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(c.default,{style:S.linkButton,onPress:()=>e.navigate("Login"),children:(0,T.jsx)(s.default,{style:S.linkText,children:"Login"})}),(0,T.jsx)(c.default,{style:S.linkButton,onPress:()=>e.navigate("Signup"),children:(0,T.jsx)(s.default,{style:S.linkText,children:"Signup"})})]})}),(0,T.jsx)(d.default,{source:o(276),style:S.logo}),(0,T.jsx)(s.default,{style:S.title,children:"Welcome to Fruit Shop App"}),(0,T.jsx)(c.default,{style:S.button,onPress:()=>e.navigate("Products"),children:(0,T.jsx)(s.default,{style:S.buttonText,children:"View Products"})}),(0,T.jsx)(c.default,{style:S.button,onPress:()=>e.navigate("Cart"),children:(0,T.jsx)(s.default,{style:S.buttonText,children:"Go to Cart"})})]})}const S=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20,backgroundColor:"#fff"},topRightButtons:{position:"absolute",top:20,right:20,flexDirection:"row"},linkButton:{marginLeft:15,padding:10},linkText:{color:"#FFA500",fontWeight:"bold",textDecorationLine:"underline",fontSize:16},logo:{width:120,height:120,marginBottom:20},title:{fontSize:24,fontWeight:"bold",marginBottom:20},button:{backgroundColor:"#FFA500",padding:15,borderRadius:8,marginVertical:10,width:"80%",alignItems:"center"},buttonText:{color:"#fff",fontSize:16,fontWeight:"bold"},modalContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},modalContent:{width:"80%",backgroundColor:"#fff",borderRadius:10,padding:20,alignItems:"center"},profileText:{fontSize:16,marginBottom:5},closeButton:{marginTop:15,padding:10},closeButtonText:{color:"#FFA500",fontSize:16,textDecorationLine:"underline"},profileImage:{width:100,height:100,borderRadius:50,marginBottom:10},placeholderImage:{width:100,height:100,borderRadius:50,backgroundColor:"#ddd",justifyContent:"center",alignItems:"center",marginBottom:10},imageHint:{fontSize:14,color:"#666",marginBottom:20},profileTitle:{fontSize:18,fontWeight:"bold",marginBottom:10,color:"#333"},wishlistButton:{position:"absolute",top:20,left:20,zIndex:10}});var F=o(3662),P=o(3761);const k=[{id:1,name:"Orange Juice",price:3.5,quantity:1,description:"Freshly squeezed orange juice.",image:"https://via.placeholder.com/150/FFA500"},{id:2,name:"Apple Juice",price:4,quantity:1,description:"Delicious and refreshing apple juice.",image:"https://via.placeholder.com/150/FF4500"},{id:3,name:"Grape Juice",price:3.8,quantity:1,description:"Sweet and tangy grape juice.",image:"https://via.placeholder.com/150/6A0DAD"},{id:4,name:"Pineapple Juice",price:4.5,quantity:1,description:"Refreshing pineapple juice with a tropical flavor.",image:"https://via.placeholder.com/150/FFD700"},{id:5,name:"Cranberry Juice",price:4.2,quantity:1,description:"Tart and flavorful cranberry juice.",image:"https://via.placeholder.com/150/DC143C"},{id:6,name:"Mango Juice",price:4.5,quantity:1,description:"Rich and smooth mango juice.",image:"https://via.placeholder.com/150/FF4500"},{id:7,name:"Pomegranate Juice",price:5,quantity:1,description:"Healthy and delicious pomegranate juice.",image:"https://via.placeholder.com/150/8B0000"},{id:8,name:"Tomato Juice",price:3.2,quantity:1,description:"Nutritious tomato juice.",image:"https://via.placeholder.com/150/FF6347"},{id:9,name:"Lemonade",price:3,quantity:1,description:"Classic and refreshing lemonade.",image:"https://via.placeholder.com/150/FFFACD"},{id:10,name:"Peach Juice",price:4.3,quantity:1,description:"Sweet and aromatic peach juice.",image:"https://via.placeholder.com/150/FFB6C1"},{id:11,name:"Orange",price:2,quantity:1,description:"Fresh oranges, perfect for juicing.",image:"https://via.placeholder.com/150/FFA500"},{id:12,name:"Apple",price:2.5,quantity:1,description:"Fresh and juicy apples.",image:"https://via.placeholder.com/150/FF4500"},{id:13,name:"Grapes",price:3,quantity:1,description:"Sweet and seedless grapes.",image:"https://via.placeholder.com/150/6A0DAD"},{id:14,name:"Pineapple",price:3.8,quantity:1,description:"Fresh pineapple with a tangy taste.",image:"https://via.placeholder.com/150/FFD700"},{id:15,name:"Cranberries",price:5,quantity:1,description:"Tart and fresh cranberries.",image:"https://via.placeholder.com/150/DC143C"},{id:16,name:"Mango",price:3.5,quantity:1,description:"Sweet and ripe mangoes.",image:"https://via.placeholder.com/150/FF4500"},{id:17,name:"Pomegranate",price:4,quantity:1,description:"Juicy and fresh pomegranates.",image:"https://via.placeholder.com/150/8B0000"},{id:18,name:"Tomatoes",price:1.8,quantity:1,description:"Fresh and ripe tomatoes.",image:"https://via.placeholder.com/150/FF6347"},{id:19,name:"Lemons",price:2,quantity:1,description:"Zesty and fresh lemons.",image:"https://via.placeholder.com/150/FFFACD"},{id:20,name:"Peaches",price:4,quantity:1,description:"Sweet and juicy peaches.",image:"https://via.placeholder.com/150/FFB6C1"}],B=u.default.create({card:{backgroundColor:"#fff",padding:16,margin:8,borderRadius:8,shadowColor:"#000",shadowOpacity:.1,shadowRadius:4,elevation:2},image:{width:"100%",height:150,borderRadius:8},name:{fontSize:18,fontWeight:"bold",marginVertical:8},description:{fontSize:14,color:"#666",marginBottom:8},price:{fontSize:16,fontWeight:"bold"},quantityContainer:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginVertical:8},button:{backgroundColor:"#ddd",padding:8,borderRadius:4},buttonText:{fontSize:18,fontWeight:"bold"},quantity:{fontSize:18,fontWeight:"bold"},likeButton:{marginVertical:8,padding:8,borderRadius:4,alignItems:"center"},liked:{backgroundColor:"#ffcccc"},notLiked:{backgroundColor:"#eee"},likeText:{fontSize:16},addToCartButton:{backgroundColor:"#4CAF50",padding:10,borderRadius:4,alignItems:"center"},addToCartText:{color:"#fff",fontWeight:"bold"}}),A=({product:e,onAddToCart:t})=>{const[o,r]=(0,a.useState)(!1),[n,i]=(0,a.useState)(0);(0,a.useEffect)((()=>{(async()=>{if(!x.currentUser)return;const t=(0,m.getFirestore)(),o=x.currentUser.uid,a=(0,m.doc)(t,"wishlist",`${o}_${e.id}`);(await(0,m.getDoc)(a)).exists()&&r(!0)})()}),[e.id]);return(0,T.jsxs)(l.default,{style:B.card,children:[(0,T.jsx)(d.default,{source:{uri:e.image},style:B.image}),(0,T.jsx)(s.default,{style:B.name,children:e.name}),(0,T.jsx)(s.default,{style:B.description,children:e.description}),(0,T.jsxs)(s.default,{style:B.price,children:["\u20b9",e.price]}),(0,T.jsxs)(l.default,{style:B.quantityContainer,children:[(0,T.jsx)(c.default,{style:B.button,onPress:()=>i((e=>e>0?e-1:0)),children:(0,T.jsx)(s.default,{style:B.buttonText,children:"-"})}),(0,T.jsx)(s.default,{style:B.quantity,children:n}),(0,T.jsx)(c.default,{style:B.button,onPress:()=>i((e=>e+1)),children:(0,T.jsx)(s.default,{style:B.buttonText,children:"+"})})]}),(0,T.jsx)(c.default,{style:[B.likeButton,o?B.liked:B.notLiked],onPress:async()=>{if(!x.currentUser)return void h.default.alert("Login Required","Please log in to use the wishlist.");const t=(0,m.getFirestore)(),a=x.currentUser.uid,n=(0,m.doc)(t,"wishlist",`${a}_${e.id}`);o?(await(0,m.deleteDoc)(n),r(!1)):(await(0,m.setDoc)(n,{userId:a,productId:e.id,name:e.name,image:e.image,price:e.price}),r(!0))},children:(0,T.jsx)(s.default,{style:B.likeText,children:o?"\u2764\ufe0f Liked":"\ud83e\udd0d Like"})}),(0,T.jsx)(c.default,{style:B.addToCartButton,onPress:()=>t(e,n),children:(0,T.jsx)(s.default,{style:B.addToCartText,children:"Add to Cart"})})]})},I=(0,a.createContext)(void 0),R=({children:e})=>{const[t,o]=(0,a.useState)([]),r=t.reduce(((e,t)=>e+t.price*t.cartQuantity),0);return(0,T.jsx)(I.Provider,{value:{cart:t,addToCart:(e,t)=>{o((o=>o.find((t=>t.id===e.id))?o.map((o=>o.id===e.id?Object.assign({},o,{cartQuantity:o.cartQuantity+t}):o)):[...o,Object.assign({},e,{cartQuantity:t})]))},removeFromCart:e=>{o((t=>t.filter((t=>t.id!==e)))),console.log},updateCartQuantity:(e,t)=>{o((o=>o.map((o=>o.id===e?Object.assign({},o,{cartQuantity:t}):o))))},totalPrice:r},children:e})},z=()=>{const e=(0,a.useContext)(I);if(!e)throw new Error("useCart must be used within a CartProvider");return e},O=u.default.create({container:{flex:1,backgroundColor:"#f8f8f8",padding:8},cartSummary:{fontSize:18,fontWeight:"bold",textAlign:"center",marginVertical:16}}),D=()=>{const{addToCart:e,cart:t}=z(),o=(0,n.useNavigation)();a.useLayoutEffect((()=>{o.setOptions({headerRight:()=>(0,T.jsx)(P.default,{title:"Go to Cart",onPress:()=>o.navigate("Cart"),color:"#FFA500"})})}),[o]);const r=(t,o)=>{o>0&&e(t,o)};return(0,T.jsxs)(l.default,{style:O.container,children:[(0,T.jsx)(F.default,{data:k,keyExtractor:e=>e.id.toString(),renderItem:({item:e})=>(0,T.jsx)(A,{product:e,onAddToCart:r})}),(0,T.jsxs)(s.default,{style:O.cartSummary,children:["Cart: ",t.length," items"]})]})};var E=o(3142),L=o(7664),W=o(6655);function q(){const{cart:e,removeFromCart:t,totalPrice:o}=z(),[r,i]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[f,g]=(0,a.useState)(""),[m,y]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[C,v]=(0,a.useState)(!1),[w]=(0,a.useState)(new L.default.Value(0)),S=(0,n.useNavigation)();(0,a.useEffect)((()=>{const e=(0,p.onAuthStateChanged)(x,(e=>{i(e)}));return()=>e()}),[]);(0,a.useEffect)((()=>{L.default.timing(w,{toValue:C?300:0,duration:300,useNativeDriver:!1}).start()}),[C]);const P=({item:e})=>(0,T.jsxs)(l.default,{style:U.cartItem,children:[(0,T.jsx)(s.default,{style:U.itemText,children:e.name}),(0,T.jsxs)(s.default,{style:U.itemText,children:["Quantity: ",e.cartQuantity]}),(0,T.jsxs)(s.default,{style:U.itemText,children:["Price: \u20b9",e.price.toFixed(2)]}),(0,T.jsx)(c.default,{onPress:()=>{return o=e.id,void h.default.alert("Remove Item","Are you sure you want to remove this item from your cart?",[{text:"Cancel",style:"cancel"},{text:"Remove",onPress:()=>t(o)}]);var o},style:U.removeButton,children:(0,T.jsx)(s.default,{style:U.removeButtonText,children:"Remove"})})]});return(0,T.jsxs)(l.default,{style:U.container,children:[(0,T.jsx)(s.default,{style:U.title,children:"Your Cart"}),0===e.length?(0,T.jsx)(s.default,{style:U.emptyCartText,children:"Your cart is empty."}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(F.default,{data:e,renderItem:P,keyExtractor:e=>e.id.toString()}),(0,T.jsx)(L.default.View,{style:{height:w,overflow:"hidden"},children:(0,T.jsx)(F.default,{data:e,renderItem:P,keyExtractor:e=>e.id.toString()})}),(0,T.jsx)(c.default,{onPress:()=>{v((e=>!e))},style:U.toggleButton,children:(0,T.jsx)(s.default,{style:U.toggleButtonText,children:C?"View Less":"View All Items"})}),(0,T.jsxs)(l.default,{style:U.addressContainer,children:[(0,T.jsx)(s.default,{style:U.inputLabel,children:"Name:"}),(0,T.jsx)(E.default,{style:U.input,value:f,onChangeText:g,placeholder:"Enter your name"}),(0,T.jsx)(s.default,{style:U.inputLabel,children:"Contact Number:"}),(0,T.jsx)(E.default,{style:U.input,value:m,onChangeText:y,placeholder:"Enter your contact number",keyboardType:"phone-pad"}),(0,T.jsx)(s.default,{style:U.inputLabel,children:"Address:"}),(0,T.jsx)(E.default,{style:U.input,value:b,onChangeText:j,placeholder:"Enter your address"})]}),(0,T.jsxs)(l.default,{style:U.paymentContainer,children:[(0,T.jsx)(s.default,{style:U.paymentTitle,children:"Select Payment Method:"}),(0,T.jsx)(c.default,{style:[U.paymentOption,"Cash on Delivery"===d&&U.selectedOption],onPress:()=>u("Cash on Delivery"),children:(0,T.jsx)(s.default,{style:U.paymentText,children:"Cash on Delivery"})}),(0,T.jsx)(c.default,{style:[U.paymentOption,"Online Payment"===d&&U.selectedOption],onPress:()=>u("Online Payment"),children:(0,T.jsx)(s.default,{style:U.paymentText,children:"Online Payment"})})]}),(0,T.jsxs)(l.default,{style:U.summaryContainer,children:[(0,T.jsxs)(s.default,{style:U.summaryText,children:["Total Price: \u20b9",o.toFixed(2)]}),(0,T.jsx)(c.default,{onPress:()=>{r?f&&m&&b?"Cash on Delivery"===d?(h.default.alert("Order Confirmed","Your order has been placed and will be paid on delivery."),(t=>{const r=e.map((e=>`${e.name} x${e.cartQuantity}`)).join(", "),a=`Order Details:\nName: ${f}\nContact: ${m}\nProducts: ${r}\nTotal Price: \u20b9${o.toFixed(2)}\nPayment Method: ${t}`;W.openURL(`sms:${m}?body=${encodeURIComponent(a)}`),W.openURL(`whatsapp://send?phone=${m}&text=${encodeURIComponent(a)}`);const n="6205720019";W.openURL(`sms:${n}?body=${encodeURIComponent(a)}`),W.openURL(`whatsapp://send?phone=${n}&text=${encodeURIComponent(a)}`)})("Cash on Delivery")):"Online Payment"===d?S.navigate("OnlinePayment",{name:f,contactNumber:m,totalPrice:o,cart:e,address:b}):h.default.alert("Select Payment Method","Please choose a payment method to proceed."):h.default.alert("Missing Information","Please provide your name , contact number and address."):h.default.alert("Authentication Required","You need to log in to proceed to checkout.",[{text:"Cancel",style:"cancel"},{text:"Login",onPress:()=>S.navigate("Login")}])},style:U.checkoutButton,children:(0,T.jsx)(s.default,{style:U.checkoutButtonText,children:"Proceed to Checkout"})})]})]})]})}const U=u.default.create({container:{flex:1,padding:20,backgroundColor:"#f7f7f7"},title:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:20},cartItem:{marginBottom:15,borderBottomWidth:1,borderBottomColor:"#ddd",paddingBottom:10},itemText:{fontSize:16,marginBottom:5},removeButton:{marginTop:10,backgroundColor:"#FF6347",padding:10,borderRadius:5},removeButtonText:{color:"#fff",textAlign:"center"},emptyCartText:{fontSize:18,color:"gray",textAlign:"center",marginTop:20},showItemsButton:{marginTop:10,backgroundColor:"#4CAF50",padding:10,borderRadius:5},showItemsText:{color:"#fff",textAlign:"center",fontSize:16},addressContainer:{marginVertical:20},inputLabel:{fontSize:16,fontWeight:"bold",marginBottom:5},input:{borderWidth:1,borderColor:"#ccc",borderRadius:5,padding:10,marginBottom:10},paymentContainer:{marginTop:20,padding:10},paymentTitle:{fontSize:18,fontWeight:"bold",marginBottom:10},paymentOption:{padding:15,marginVertical:5,borderRadius:5,borderWidth:1,borderColor:"#ddd"},selectedOption:{borderColor:"#4CAF50",backgroundColor:"#e8f5e9"},paymentText:{fontSize:16},summaryContainer:{marginTop:20,padding:15,borderTopWidth:1,borderTopColor:"#ddd",backgroundColor:"#fff",borderRadius:5},summaryText:{fontSize:18,fontWeight:"bold"},checkoutButton:{marginTop:10,backgroundColor:"#FFA500",padding:15,borderRadius:5},checkoutButtonText:{color:"#fff",textAlign:"center",fontSize:18},toggleButton:{marginTop:10,backgroundColor:"#FFA500",padding:10,borderRadius:5},toggleButtonText:{color:"#fff",textAlign:"center",fontSize:16}});var N=o(7481),V=o(3349);function $(){const[e,t]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[y,b]=(0,a.useState)(!1),j=(0,n.useNavigation)();return(0,T.jsxs)(N.default,{contentContainerStyle:Q.container,children:[(0,T.jsx)(s.default,{style:Q.title,children:"Sign Up"}),(0,T.jsx)(E.default,{style:Q.input,placeholder:"Full Name",placeholderTextColor:"#aaa",value:e,onChangeText:t}),(0,T.jsx)(E.default,{style:Q.input,placeholder:"Mobile Number",placeholderTextColor:"#aaa",keyboardType:"numeric",value:o,onChangeText:r}),(0,T.jsx)(E.default,{style:Q.input,placeholder:"Address",placeholderTextColor:"#aaa",value:i,onChangeText:l}),(0,T.jsx)(E.default,{style:Q.input,placeholder:"Email",placeholderTextColor:"#aaa",keyboardType:"email-address",value:d,onChangeText:u}),(0,T.jsx)(E.default,{style:Q.input,placeholder:"Password",placeholderTextColor:"#aaa",secureTextEntry:!0,value:f,onChangeText:g}),(0,T.jsx)(c.default,{style:[Q.button,y&&Q.buttonDisabled],onPress:async()=>{if(e&&o&&i&&d&&f){b(!0);try{const t=await(0,p.createUserWithEmailAndPassword)(x,d,f),r=t.user;await(0,p.sendEmailVerification)(r),console.log("Verification email sent!");const a=(0,m.getFirestore)();await(0,m.setDoc)((0,m.doc)(a,"users",r.uid),{name:e,mobile:o,address:i,email:d,photoURL:r.photoURL||null}),console.log("User signed up:",t.user),h.default.alert("Success","Account created successfully! Please verify your email before logging in."),j.navigate("Home")}catch(t){console.error("Signup Error:",t.message),h.default.alert("Error",t.message)}finally{b(!1)}}else h.default.alert("Error","All fields are required!")},disabled:y,children:y?(0,T.jsx)(V.default,{color:"#fff"}):(0,T.jsx)(s.default,{style:Q.buttonText,children:"Sign Up"})})]})}const Q=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#fff",padding:20},title:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},input:{width:"90%",backgroundColor:"#f9f9f9",padding:15,borderRadius:8,borderWidth:1,borderColor:"#ddd",marginBottom:20},button:{backgroundColor:"#FFA500",padding:15,borderRadius:8,width:"80%",alignItems:"center",marginVertical:10},buttonDisabled:{backgroundColor:"#FFC04C"},buttonText:{color:"#fff",fontSize:16,fontWeight:"bold"}});function J(){const[e,t]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,d]=(0,a.useState)(!1),u=(0,n.useNavigation)();return(0,T.jsxs)(l.default,{style:M.container,children:[(0,T.jsx)(s.default,{style:M.title,children:"Login"}),(0,T.jsx)(E.default,{style:M.input,placeholder:"Enter Email",placeholderTextColor:"#aaa",value:e,onChangeText:t}),(0,T.jsx)(E.default,{style:M.input,placeholder:"Enter Password",placeholderTextColor:"#aaa",secureTextEntry:!0,value:o,onChangeText:r}),(0,T.jsx)(c.default,{style:[M.button,i&&M.buttonDisabled],onPress:async()=>{if(e&&o){d(!0);try{const t=(await(0,p.signInWithEmailAndPassword)(x,e,o)).user;if(!t.emailVerified)return void h.default.alert("Email Not Verified","Please verify your email before logging in.");console.log("User logged in:",t),h.default.alert("Success","Logged in successfully!"),u.navigate("Home")}catch(t){console.error("Login Error:",t.message),h.default.alert("Error",t.message)}finally{d(!1)}}else h.default.alert("Error","Both fields are required!")},disabled:i,children:i?(0,T.jsx)(V.default,{color:"#fff"}):(0,T.jsx)(s.default,{style:M.buttonText,children:"Login"})}),(0,T.jsx)(c.default,{onPress:()=>u.navigate("Signup"),style:M.linkButton,children:(0,T.jsx)(s.default,{style:M.linkText,children:"New here? Sign up"})})]})}const M=u.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#fff",padding:20},title:{fontSize:24,fontWeight:"bold",color:"#333",marginBottom:20},input:{width:"90%",backgroundColor:"#f9f9f9",padding:15,borderRadius:8,borderWidth:1,borderColor:"#ddd",marginBottom:20},button:{backgroundColor:"#FFA500",padding:15,borderRadius:8,width:"80%",alignItems:"center",marginVertical:10},buttonDisabled:{backgroundColor:"#FFC04C"},buttonText:{color:"#fff",fontSize:16,fontWeight:"bold"},linkButton:{marginTop:10},linkText:{color:"#FFA500",fontSize:14,fontWeight:"bold"}});var _=o(4382);function H({route:e}){const{name:t,contactNumber:o,totalPrice:r,cart:n}=e.params,[i,d]=(0,a.useState)(null),u=`https://www.sandbox.paypal.com/checkoutnow?client_id=ATQXO8R9iQ_dyBJYRh4UI8bO7XDknVIRNgQw-k2Bxu74pV619B7jAydBPn4wAtTd2N7r4D90H5pg_9tJ&currency=USD&amount=${r}`;return"success"===i?(0,T.jsxs)(l.default,{style:Y.container,children:[(0,T.jsx)(s.default,{style:Y.title,children:"Payment Successful"}),(0,T.jsx)(s.default,{style:Y.text,children:"Thank you for your payment! Your order is being processed."}),(0,T.jsx)(c.default,{style:Y.button,onPress:()=>{},children:(0,T.jsx)(s.default,{style:Y.buttonText,children:"Go to Orders"})})]}):(0,T.jsxs)(l.default,{style:Y.container,children:[(0,T.jsx)(s.default,{style:Y.subTitle,children:"Your Order Summary"}),(0,T.jsxs)(l.default,{style:Y.infoContainer,children:[(0,T.jsxs)(s.default,{style:Y.text,children:[(0,T.jsx)(s.default,{style:Y.bold,children:"Name:"})," ",t]}),(0,T.jsxs)(s.default,{style:Y.text,children:[(0,T.jsx)(s.default,{style:Y.bold,children:"Contact:"})," ",o]}),(0,T.jsxs)(s.default,{style:Y.text,children:[(0,T.jsx)(s.default,{style:Y.bold,children:"Total Price:"})," \u20b9",r.toFixed(2)]})]}),(0,T.jsx)(s.default,{style:Y.subTitle,children:"Cart Items:"}),(0,T.jsx)(l.default,{style:Y.cartList,children:n.map(((e,t)=>(0,T.jsxs)(s.default,{style:Y.cartItem,children:[e.name," (x",e.cartQuantity,"): \u20b9",e.price.toFixed(2)]},t)))}),(0,T.jsx)(s.default,{style:Y.note,children:"Redirecting to PayPal for payment..."}),(0,T.jsx)(l.default,{style:Y.webViewContainer,children:(0,T.jsx)(_.WebView,{source:{uri:u},onNavigationStateChange:e=>{e.url.includes("https://fruitsshop-bf9a7.web.app/success.html")&&d("success")},startInLoadingState:!0,renderLoading:()=>(0,T.jsx)(V.default,{size:"large",color:"#4CAF50"})})})]})}const Y=u.default.create({container:{flex:1,padding:20,backgroundColor:"#f7f7f7"},title:{fontSize:28,fontWeight:"bold",color:"#333",marginBottom:10,textAlign:"center"},subTitle:{fontSize:18,fontWeight:"500",marginTop:20,color:"#555"},text:{fontSize:16,marginBottom:10,color:"#333"},bold:{fontWeight:"bold",color:"#000"},infoContainer:{backgroundColor:"#fff",padding:15,borderRadius:10,marginVertical:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},cartList:{backgroundColor:"#fff",padding:10,borderRadius:10,marginVertical:10,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},cartItem:{fontSize:14,marginLeft:10,color:"#555"},note:{marginTop:20,fontSize:14,color:"#888",textAlign:"center"},webViewContainer:{flex:1,marginTop:20,borderRadius:10,overflow:"hidden",borderWidth:1,borderColor:"#ddd"},button:{backgroundColor:"#4CAF50",paddingVertical:12,paddingHorizontal:25,borderRadius:25,marginTop:30,alignItems:"center",justifyContent:"center"},buttonText:{color:"#fff",fontSize:16,fontWeight:"bold"}}),G=(0,a.createContext)(void 0),X=({children:e})=>{const[t,o]=(0,a.useState)([]),r=(0,m.getFirestore)();return(0,T.jsx)(G.Provider,{value:{wishlist:t,toggleWishlist:async e=>{const t=x.currentUser;if(!t)return;const a=t.uid,n=(0,m.doc)(r,"wishlist",`${a}_${e.id}`);o((t=>t.some((t=>t.id===e.id))?((0,m.deleteDoc)(n).then((()=>console.log("Item removed from Firebase wishlist"))).catch((e=>console.error("Error removing item:",e))),t.filter((t=>t.id!==e.id))):((0,m.setDoc)(n,Object.assign({},e,{userId:a})).then((()=>console.log("Item added to Firebase wishlist"))).catch((e=>console.error("Error adding item:",e))),[...t,e])))}},children:e})};function K(){const[e,t]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{const e=x.currentUser;if(e)try{const o=(0,m.getFirestore)(),r=(0,m.query)((0,m.collection)(o,"wishlist"),(0,m.where)("userId","==",e.uid)),a=(await(0,m.getDocs)(r)).docs.map((e=>Object.assign({id:e.id},e.data())));t(a)}catch(o){console.error("Error fetching wishlist:",o)}})()}),[]);return(0,T.jsxs)(l.default,{style:Z.container,children:[(0,T.jsx)(s.default,{style:Z.title,children:"Your Wishlist"}),e.length>0?(0,T.jsx)(F.default,{data:e,keyExtractor:e=>e.id,renderItem:({item:o})=>(0,T.jsxs)(l.default,{style:Z.productCard,children:[(0,T.jsx)(d.default,{source:{uri:o.image},style:Z.productImage}),(0,T.jsxs)(l.default,{style:Z.productDetails,children:[(0,T.jsx)(s.default,{style:Z.productName,children:o.name}),(0,T.jsxs)(s.default,{style:Z.productPrice,children:["\u20b9",o.price]})]}),(0,T.jsx)(c.default,{onPress:()=>(async o=>{try{const r=(0,m.getFirestore)(),a=x.currentUser?.uid;if(!a)return;await(0,m.deleteDoc)((0,m.doc)(r,"wishlist",`${a}_${o}`)),t(e.filter((e=>e.id!==o)))}catch(r){console.error("Error deleting item:",r)}})(o.id),style:Z.deleteButton,children:(0,T.jsx)(b.default,{name:"delete",size:24,color:"#FFA500"})})]})}):(0,T.jsx)(s.default,{style:Z.noItemsText,children:"No items in your wishlist"})]})}const Z=u.default.create({container:{flex:1,padding:20,backgroundColor:"#fff"},title:{fontSize:24,fontWeight:"bold",marginBottom:20,textAlign:"center"},productCard:{flexDirection:"row",marginBottom:15,backgroundColor:"#f9f9f9",padding:10,borderRadius:10},productImage:{width:80,height:80,borderRadius:10},productDetails:{marginLeft:15,justifyContent:"center"},productName:{fontSize:18,fontWeight:"bold",marginLeft:0},productPrice:{fontSize:16,color:"#888"},noItemsText:{fontSize:16,textAlign:"center",color:"#666"},deleteButton:{padding:5,marginLeft:35,marginTop:15}}),ee=(0,i.createNativeStackNavigator)();(0,r.default)((function(){return(0,T.jsxs)(R,{children:[" ",(0,T.jsx)(X,{children:(0,T.jsx)(n.NavigationContainer,{children:(0,T.jsxs)(ee.Navigator,{initialRouteName:"Home",children:[(0,T.jsx)(ee.Screen,{name:"Home",component:w}),(0,T.jsx)(ee.Screen,{name:"Login",component:J}),(0,T.jsx)(ee.Screen,{name:"Signup",component:$}),(0,T.jsx)(ee.Screen,{name:"Products",component:D}),(0,T.jsx)(ee.Screen,{name:"Cart",component:q}),(0,T.jsx)(ee.Screen,{name:"OnlinePayment",component:H}),(0,T.jsx)(ee.Screen,{name:"Wishlist",component:K})]})})})]})}))},276:(e,t,o)=>{e.exports=o.p+"static/media/logo.ca285b2a83de8475db55.webp"}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,o),n.exports}o.m=e,(()=>{var e=[];o.O=(t,r,a,n)=>{if(!r){var i=1/0;for(c=0;c<e.length;c++){for(var[r,a,n]=e[c],l=!0,s=0;s<r.length;s++)(!1&n||i>=n)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(l=!1,n<i&&(i=n));if(l){e.splice(c--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,a,n]}})(),o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={792:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var a,n,[i,l,s]=r,d=0;if(i.some((t=>0!==e[t]))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(s)var c=s(o)}for(t&&t(r);d<i.length;d++)n=i[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=o.O(void 0,[893],(()=>o(469)));r=o.O(r)})();
//# sourceMappingURL=main.539c7833.js.map